<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Randevu Al | KuafÃ¶r Studio</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar scrolled">
        <a href="/" class="navbar-brand">
            <span class="icon">âœ‚ï¸</span>
            <span>KuafÃ¶r Studio</span>
        </a>
        <ul class="nav-links" id="navLinks">
            <li><a href="/">Ana Sayfa</a></li>
            <li><a href="/#hizmetler">Hizmetler</a></li>
            <li><a href="/randevu" class="btn-nav">ğŸ“… Randevu Al</a></li>
        </ul>
        <button class="hamburger" onclick="toggleMenu()">
            <span></span><span></span><span></span>
        </button>
    </nav>

    <!-- RANDEVU FORMU -->
    <div class="booking-page">
        <div class="booking-container">
            <div class="booking-card">
                <h2>ğŸ“… Randevu OluÅŸtur</h2>
                <p class="subtitle">BirkaÃ§ adÄ±mda randevunuzu oluÅŸturun</p>

                <form id="appointmentForm" onsubmit="return submitForm(event)">
                    <!-- Ä°sim -->
                    <div class="form-group">
                        <label for="name">ğŸ‘¤ Ad Soyad</label>
                        <input type="text" id="name" name="name" placeholder="AdÄ±nÄ±z ve soyadÄ±nÄ±z" required minlength="2">
                    </div>

                    <!-- Telefon -->
                    <div class="form-group">
                        <label for="phone">ğŸ“ Telefon NumarasÄ±</label>
                        <input type="tel" id="phone" name="phone" placeholder="05XX XXX XX XX" required minlength="10" maxlength="15">
                    </div>

                    <!-- Hizmet -->
                    <div class="form-group">
                        <label for="service">ğŸ’ˆ Hizmet SeÃ§imi</label>
                        <select id="service" name="service" required>
                            <option value="">Hizmet seÃ§iniz...</option>
                            {% for h in hizmetler %}
                            <option value="{{ h.ad }}">{{ h.ad }} - â‚º{{ h.fiyat }} ({{ h.sure }} dk)</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Tarih -->
                    <div class="form-group">
                        <label for="date">ğŸ“† Tarih</label>
                        <input type="date" id="date" name="date" required>
                    </div>

                    <!-- Kapasite Bilgisi -->
                    <div class="kapasite-info" id="kapasiteInfo" style="display: none;">
                        <span>ğŸ“Š</span>
                        <span id="kapasiteText"></span>
                    </div>

                    <!-- Saat SeÃ§imi -->
                    <div class="form-group" id="timeGroup" style="display: none;">
                        <label>ğŸ• Saat SeÃ§imi</label>
                        <div class="time-slots" id="timeSlots">
                            <!-- JS ile doldurulacak -->
                        </div>
                        <div class="time-slot-legend">
                            <span><span class="legend-dot musait"></span> MÃ¼sait</span>
                            <span><span class="legend-dot dolu"></span> Dolu</span>
                            <span><span class="legend-dot gecmis"></span> GeÃ§miÅŸ</span>
                        </div>
                        <input type="hidden" id="time" name="time" required>
                    </div>

                    <!-- GÃ¶nder -->
                    <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center; font-size: 1.1rem;" id="submitBtn">
                        âœ… Randevuyu Onayla
                    </button>
                </form>

                <!-- Mesaj -->
                <div class="message-box" id="messageBox"></div>

                <!-- BaÅŸarÄ±lÄ± mesaj sonrasÄ± -->
                <div id="successActions" style="display: none; text-align: center; margin-top: 1.5rem;">
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">Randevunuz baÅŸarÄ±yla oluÅŸturuldu!</p>
                    <a href="/" class="btn btn-outline btn-sm">ğŸ  Ana Sayfaya DÃ¶n</a>
                    <button class="btn btn-primary btn-sm" onclick="resetForm()" style="margin-left: 0.5rem;">ğŸ“… Yeni Randevu</button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/randevu.js') }}"></script>
    <script>
        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('active');
        }
    </script>
</body>
</html>
