<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel | Kuaf√∂r Studio</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar scrolled">
        <a href="/admin/panel" class="navbar-brand">
            <span class="icon">‚úÇÔ∏è</span>
            <span>Kuaf√∂r Studio</span>
        </a>
        <ul class="nav-links" id="navLinks">
            <li><a href="/" target="_blank">üåê Siteyi G√∂r</a></li>
            <li><a href="#" onclick="handleLogout()" style="color: var(--accent);">üö™ √áƒ±kƒ±≈ü Yap</a></li>
        </ul>
        <button class="hamburger" onclick="toggleMenu()">
            <span></span><span></span><span></span>
        </button>
    </nav>

    <div class="admin-page">
        <!-- Header -->
        <div class="admin-header">
            <h1>üìã Y√∂netim <span class="highlight">Paneli</span></h1>
            <div style="display: flex; gap: 0.5rem;">
                <button class="btn btn-outline btn-sm" onclick="loadData()">üîÑ Yenile</button>
            </div>
        </div>

        <!-- ƒ∞statistikler -->
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="number" id="statBugun">-</div>
                <div class="label">Bug√ºnk√º Randevu</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statAktif">-</div>
                <div class="label">Aktif Randevu</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statToplam">-</div>
                <div class="label">Toplam Randevu</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statIptal">-</div>
                <div class="label">ƒ∞ptal Edilen</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statPopuler" style="font-size: 1rem;">-</div>
                <div class="label">En Pop√ºler Hizmet</div>
            </div>
        </div>

        <!-- Tablar -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('liste', this)">üìã Liste G√∂r√ºn√ºm√º</button>
            <button class="tab-btn" onclick="switchTab('takvim', this)">üìÖ Takvim G√∂r√ºn√ºm√º</button>
        </div>

        <!-- TAB: Liste -->
        <div class="tab-content active" id="tab-liste">
            <!-- Filtreler -->
            <div class="filters">
                <input type="date" id="filterDate" onchange="loadAppointments()">
                <select id="filterStatus" onchange="loadAppointments()">
                    <option value="">T√ºm Durumlar</option>
                    <option value="aktif">Aktif</option>
                    <option value="iptal">ƒ∞ptal</option>
                    <option value="tamamlandƒ±">Tamamlandƒ±</option>
                </select>
                <button class="btn btn-sm btn-outline" onclick="clearFilters()">Filtreleri Temizle</button>
            </div>

            <!-- Tablo -->
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Ad Soyad</th>
                            <th>Telefon</th>
                            <th>Hizmet</th>
                            <th>Tarih</th>
                            <th>Saat</th>
                            <th>Durum</th>
                            <th>ƒ∞≈ülemler</th>
                        </tr>
                    </thead>
                    <tbody id="appointmentsBody">
                        <tr>
                            <td colspan="8">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Y√ºkleniyor...
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB: Takvim -->
        <div class="tab-content" id="tab-takvim">
            <div class="calendar-view">
                <div class="calendar-header">
                    <button class="btn btn-sm btn-outline" onclick="changeWeek(-1)">‚Üê √ñnceki Hafta</button>
                    <h3 id="calendarTitle">Bu Hafta</h3>
                    <button class="btn btn-sm btn-outline" onclick="changeWeek(1)">Sonraki Hafta ‚Üí</button>
                </div>
                <div class="calendar-grid" id="calendarGrid">
                    <!-- JS ile doldurulacak -->
                </div>
            </div>
        </div>
    </div>

    <!-- Onay Modal -->
    <div class="modal-overlay" id="confirmModal">
        <div class="modal">
            <h3 id="modalTitle">Emin misiniz?</h3>
            <p id="modalMessage">Bu i≈ülem geri alƒ±namaz.</p>
            <div class="modal-actions">
                <button class="btn btn-sm btn-outline" onclick="closeModal()">ƒ∞ptal</button>
                <button class="btn btn-sm btn-danger" id="modalConfirmBtn" onclick="confirmAction()">Onayla</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
    <script>
        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('active');
        }
    </script>
</body>

</html>